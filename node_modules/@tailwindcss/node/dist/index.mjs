var C=Object.defineProperty;var F=(e,t)=>{for(var s in t)C(e,s,{get:t[s],enumerable:!0})};import*as u from"node:module";import{pathToFileURL as X}from"node:url";var p={};F(p,{DEBUG:()=>T});var T=$(process.env.DEBUG);function $(e){if(e===void 0)return!1;if(e==="true"||e==="1")return!0;if(e==="false"||e==="0")return!1;if(e==="*")return!0;let t=e.split(",").map(s=>s.split(":")[0]);return t.includes("-tailwindcss")?!1:!!t.includes("tailwindcss")}import f from"enhanced-resolve";import{createJiti as J}from"jiti";import E from"node:fs";import W from"node:fs/promises";import y,{dirname as h,extname as b}from"node:path";import{pathToFileURL as w}from"node:url";import{__unstable__loadDesignSystem as k,compile as B}from"tailwindcss";import c from"node:fs/promises";import a from"node:path";var M=[/import[\s\S]*?['"](.{3,}?)['"]/gi,/import[\s\S]*from[\s\S]*?['"](.{3,}?)['"]/gi,/export[\s\S]*from[\s\S]*?['"](.{3,}?)['"]/gi,/require\(['"`](.+)['"`]\)/gi],N=[".js",".cjs",".mjs"],I=["",".js",".cjs",".mjs",".ts",".cts",".mts",".jsx",".tsx"],O=["",".ts",".cts",".mts",".tsx",".js",".cjs",".mjs",".jsx"];async function U(e,t){for(let s of t){let r=`${e}${s}`;if((await c.stat(r).catch(()=>null))?.isFile())return r}for(let s of t){let r=`${e}/index${s}`;if(await c.access(r).then(()=>!0,()=>!1))return r}return null}async function g(e,t,s,r){let n=N.includes(r)?I:O,i=await U(a.resolve(s,t),n);if(i===null||e.has(i))return;e.add(i),s=a.dirname(i),r=a.extname(i);let o=await c.readFile(i,"utf-8"),l=[];for(let P of M)for(let d of o.matchAll(P))d[1].startsWith(".")&&l.push(g(e,d[1],s,r));await Promise.all(l)}async function v(e){let t=new Set;return await g(t,e,a.dirname(e),a.extname(e)),Array.from(t)}function L(e,{base:t,onDependency:s}){return B(e,{base:t,async loadModule(r,n){return D(r,n,s)},async loadStylesheet(r,n){return j(r,n,s)}})}async function q(e,{base:t}){return k(e,{base:t,async loadModule(s,r){return D(s,r,()=>{})},async loadStylesheet(s,r){return j(s,r,()=>{})}})}async function D(e,t,s){if(e[0]!=="."){let o=await R(e,t);if(!o)throw new Error(`Could not resolve '${e}' from '${t}'`);let l=await S(w(o).href);return{base:h(o),module:l.default??l}}let r=await R(e,t);if(!r)throw new Error(`Could not resolve '${e}' from '${t}'`);let[n,i]=await Promise.all([S(w(r).href+"?id="+Date.now()),v(r)]);for(let o of i)s(o);return{base:h(r),module:n.default??n}}async function j(e,t,s){let r=await z(e,t);if(!r)throw new Error(`Could not resolve '${e}' from '${t}'`);if(s(r),typeof globalThis.__tw_readFile=="function"){let i=await globalThis.__tw_readFile(r,"utf-8");if(i)return{base:y.dirname(r),content:i}}let n=await W.readFile(r,"utf-8");return{base:y.dirname(r),content:n}}var _=null;async function S(e){try{return await import(e)}catch(t){try{return _??=J(import.meta.url,{moduleCache:!1,fsCache:!1}),await _.import(e)}catch{}throw t}}var x=f.ResolverFactory.createResolver({fileSystem:new f.CachedInputFileSystem(E,4e3),useSyncFileSystemCalls:!0,extensions:[".css"],mainFields:["style"],conditionNames:["style"]});async function z(e,t){if(typeof globalThis.__tw_resolve=="function"){let r=globalThis.__tw_resolve(e,t);if(r)return Promise.resolve(r)}if(!(b(e)===""||e.startsWith(".")))try{let r=await m(x,`./${e}`,t);if(!r)throw new Error;return r}catch{}return m(x,e,t)}var A=f.ResolverFactory.createResolver({fileSystem:new f.CachedInputFileSystem(E,4e3),useSyncFileSystemCalls:!0});function R(e,t){return m(A,e,t)}function m(e,t,s){return new Promise((r,n)=>e.resolve({},s,t,{},(i,o)=>{if(i)return n(i);r(o)}))}function G(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var s=e.length;if(s<=1)return e;var r="";if(s>4&&e[3]==="\\"){var n=e[2];(n==="?"||n===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),r="//")}var i=e.split(/[/\\]+/);return t!==!1&&i[i.length-1]===""&&i.pop(),r+i.join("/")}function le(e){let t=G(e);return e.startsWith("\\\\")&&t.startsWith("/")&&!t.startsWith("//")?`/${t}`:t}if(!process.versions.bun){let e=u.createRequire(import.meta.url);u.register?.(X(e.resolve("@tailwindcss/node/esm-cache-loader")))}export{q as __unstable__loadDesignSystem,L as compile,p as env,le as normalizePath};
